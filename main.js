(()=>{const t=document.querySelector("[data-lists-container]"),e=document.querySelector("[data-list-input ]"),a=document.querySelector("[data-list-form]"),l=document.querySelector("[data-list-template]"),c=(document.querySelector("[data-list-title]"),document.querySelector("[data-all-tasks]")),o=document.querySelector("[data-tasks]"),s=document.querySelector("[data-task-form]"),n=document.querySelector("[data-task-name-input]"),d=document.querySelector("[data-task-date-input]"),i=document.querySelector("[data-task-template]"),r="localStorageLists",u="localStorageListId";let m=JSON.parse(localStorage.getItem(r))||[],v=localStorage.getItem(u);function S(t){t.tasks.forEach((e=>{const a=i.content.cloneNode(!0),l=a.querySelector("[data-task-text]"),c=a.querySelector("[data-task-date]"),s=a.querySelector("[data-task-checkbox]"),n=a.querySelector("[data-task-delete-button]"),d=a.querySelector("[data-task-div]");n.addEventListener("click",(a=>{const l=e.id;t.tasks=t.tasks.filter((t=>t.id!==l)),f()})),e.complete?d.classList.add("active-item"):d.classList.remove("active-item"),s.addEventListener("click",(()=>{e.complete=!e.complete,f()})),s.checked=e.complete,l.textContent=e.name,c.textContent=e.date,o.appendChild(a)}))}function k(){y(t),y(o),m.forEach((e=>{const a=l.content.cloneNode(!0),o=a.querySelector("[data-list-text]"),s=a.querySelector("[data-list-delete-button]"),n=a.querySelector("div");o.textContent=e.name,t.appendChild(a),e.id===v&&(n.classList.add("active-list"),c.classList.remove("active-list")),s.addEventListener("click",(t=>{const a=e.id;m=m.filter((t=>t.id!==a)),a==v&&(v=null,c.classList.add("active-list")),f()})),n.addEventListener("click",(t=>{null==t.target.closest("[data-list-delete-button]")&&(v=e.id),f()}))})),v?S(p()):m.forEach((t=>{S(t)}))}function f(){localStorage.setItem(r,JSON.stringify(m)),localStorage.setItem(u,v),k()}function y(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function p(){return m.find((t=>t.id===v))}c.addEventListener("click",(e=>{v=null,c.classList.add("active-list"),m.forEach((e=>{t.classList.remove("active-list")})),f()})),a.addEventListener("submit",(t=>{t.preventDefault();const a=(l=e.value,{id:Date.now().toString(),name:l,tasks:[]});var l;e.value=null,m.push(a),v=a.id,f()})),s.addEventListener("submit",(t=>{t.preventDefault();const e=(a=n.value,l=d.value,{id:Date.now().toString(),name:a,date:l,complete:!1});var a,l;n.value=null,d.value=null,p().tasks.push(e),f()})),k()})();